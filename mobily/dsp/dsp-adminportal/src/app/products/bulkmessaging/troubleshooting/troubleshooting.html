<div class="col-md-12 col-sm-12">

    <div class="tab-content stacked-content">

        <div class="tab-pane fade active in portlet portlet-default">

            <div class="portlet-body buttons-portlet-body">
                <div class="row">
                    <div class="col-md-7 col-xs-4">
                        <div class="pull-left">
                            <div class="btn btn-sm btn-secondary pull-left"
                                 title="{{ 'CommonMessages.DateFilterButtonTitle' | translate }}"
                                 ng-model="filterFormLayer.isFilterFormOpen"
                                 ng-init="filterFormLayer.isFilterFormOpen = true"
                                 ng-click="filterFormLayer.isFilterFormOpen = !filterFormLayer.isFilterFormOpen">
                                <span ng-if="!filterFormLayer.isFilterFormOpen">{{ 'CommonLabels.ShowFilter' | translate }} <i class="fa fa-chevron-circle-right"></i></span>
                                <span ng-if="filterFormLayer.isFilterFormOpen">{{ 'CommonLabels.HideFilter' | translate }} <i class="fa fa-chevron-circle-down"></i></span>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-5 col-xs-8">
                        <div class="btn-group pull-right" ng-init="edrType = BMS_JOB_TYPES.BULK_SMS;">
                            <button type="button" class="btn {{edrType === BMS_JOB_TYPES.BULK_SMS?'btn-default active':'btn-default'}} btn-sm"
                                    ng-model="edrType" uib-btn-radio="BMS_JOB_TYPES.BULK_SMS">{{ 'Products.BulkMessaging.BulkSMS.Title' | translate }}
                            </button>
                            <button type="button" class="btn {{edrType === BMS_JOB_TYPES.BULK_MMS?'btn-default active':'btn-default'}} btn-sm"
                                    ng-model="edrType" uib-btn-radio="BMS_JOB_TYPES.BULK_MMS">{{ 'Products.BulkMessaging.BulkMMS.Title' | translate }}
                            </button>
                            <button type="button" class="btn {{edrType === BMS_JOB_TYPES.BULK_IVR?'btn-default active':'btn-default'}} btn-sm"
                                    ng-model="edrType" uib-btn-radio="BMS_JOB_TYPES.BULK_IVR">{{ 'Products.BulkMessaging.BulkIVR.Title' | translate }}
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="portlet-body">
                <div class="row">
                    <div hidden-filter-form ng-model="filterFormLayer" class="col-sm-12 filter-form">

                        <form id="filterForm" name="filterForm" method="post" enctype="multipart/form-data" class="form-horizontal parsley-form" novalidate>

                            <div class="portlet portlet-boxed">

                                <div class="portlet-body">

                                    <div class="form-group">
                                        <label for="startDate" class="col-md-2 col-sm-3 control-label text-right">{{ 'GenericFormFields.StartDateAndTime.Label' | translate }}</label>
                                        <div class="col-md-3 col-sm-4">
                                            <div id="startDate" class="input-group date datepicker-field">
                                                <input id="startDate" name="startDate" type="text" class="form-control input-sm"
                                                       ng-model="dateFilter.startDate" uib-datepicker-popup="{{dateFormat}}"
                                                       ng-change="updateStartDate(dateFilter.startDate)"
                                                       ng-focus="openStartDatePicker($event)"
                                                       min-max-check is-open="startDatePicker.opened"
                                                       max-date="dateFilter.endDate" datepicker-options="dateOptions"
                                                       ng-required="true"/>
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default input-sm"
                                                            ng-click="openStartDatePicker($event)"><i
                                                            class="fa fa-calendar"></i></button>
                                                </span>
                                            </div>
                                            <ul ng-class="{ 'parsley-error-list': filterForm.startDate.$dirty && filterForm.startDate.$invalid }" ng-show="filterForm.startDate.$dirty && filterForm.startDate.$invalid">
                                                <li class="required" ng-show="filterForm.startDate.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                                                <li class="required" ng-show="filterForm.startDate.$error.date">{{ 'GenericFormFields.StartDateAndTime.Messages.Invalid' | translate }}</li>
                                                <li class="required" ng-show="filterForm.startDate.$error.maxDateExceeded">{{ 'GenericFormFields.StartDateAndTime.Messages.MaxDateExceeded' | translate }}</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 col-sm-4">
                                            <div uib-timepicker ng-model="dateFilter.startTime" class="time-picker with-date-picker"
                                                 hour-step="hstep" minute-step="mstep"
                                                 show-meridian="false" readonly-input="true" mousewheel="false"
                                                 ng-change="updateStartDateTime(dateFilter.startTime)"></div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="endDate" class="col-md-2 col-sm-3 control-label text-right">{{ 'GenericFormFields.EndDateAndTime.Label' | translate }}</label>
                                        <div class="col-md-3 col-sm-4">
                                            <div id="endDate" class="input-group date datepicker-field">
                                                <input id="endDate" name="endDate" type="text" class="form-control input-sm"
                                                       ng-model="dateFilter.endDate" uib-datepicker-popup="{{dateFormat}}"
                                                       ng-change="updateEndDate(dateFilter.endDate)"
                                                       ng-focus="openEndDatePicker($event)"
                                                       min-max-check is-open="endDatePicker.opened"
                                                       min-date="dateFilter.startDate" datepicker-options="dateOptions"
                                                       ng-required="true"/>
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default input-sm"
                                                            ng-click="openEndDatePicker($event)"><i
                                                            class="fa fa-calendar"></i></button>
                                                </span>
                                            </div>
                                            <ul ng-class="{ 'parsley-error-list': filterForm.endDate.$dirty && filterForm.endDate.$invalid }" ng-show="filterForm.endDate.$dirty && filterForm.endDate.$invalid">
                                                <li class="required" ng-show="filterForm.endDate.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                                                <li class="required" ng-show="filterForm.endDate.$error.date">{{ 'GenericFormFields.EndDateAndTime.Messages.Invalid' | translate }}</li>
                                                <li class="required" ng-show="filterForm.endDate.$error.minDateExceeded">{{ 'GenericFormFields.EndDateAndTime.Messages.MinDateExceeded' | translate }}</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 col-sm-4">
                                            <div uib-timepicker ng-model="dateFilter.endTime" class="time-picker with-date-picker"
                                                 hour-step="hstep" minute-step="mstep"
                                                 show-meridian="false" readonly-input="true" mousewheel="false"
                                                 ng-change="updateEndDateTime(dateFilter.endTime)"></div>
                                        </div>
                                    </div>

                                    <div class="form-group" ng-if="isBMSAdminUser">
                                        <label for="organizationId" class="col-md-2 col-sm-3 control-label text-right">{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Organization' | translate }}</label>
                                        <div class="col-md-3 col-sm-4">
                                            <select id="organizationId" name="organizationId" class="form-control"
                                                    ng-model="dateFilter.organizationId"
                                                    ng-change="changeOrganization(dateFilter.organizationId);"
                                                    ng-options="organization.id as organization.name for organization in organizationList">
                                                <option value="">{{ 'CommonLabels.All' | translate }}</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group" ng-if="isBMSAdminUser">
                                        <label for="userId" class="col-md-2 col-sm-3 control-label text-right">{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.User' | translate }}</label>
                                        <div class="col-md-3 col-sm-4">
                                            <select id="userId" name="userId" class="form-control"
                                                    ng-model="dateFilter.userId"
                                                    ng-options="userAccount.id as userAccount.userName for userAccount in (userAccountList | UserByOrganizationFilter:dateFilter.organizationId)"
                                                    ng-disabled="!userAccountList || userAccountList.length === 0">
                                                <option value="">{{ 'CommonLabels.All' | translate }}</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-md-2 col-sm-3">&nbsp;</label>
                                        <div class="col-md-3 col-sm-4">
                                            <button class="btn btn-sm btn-secondary" ng-disabled="filterForm.$invalid"
                                                    ng-click="throttledReloadTable();"><i class="fa fa-search"></i>
                                                {{'CommonLabels.Search' | translate }}
                                            </button>
                                        </div>
                                    </div>

                                </div>

                            </div>

                        </form>

                    </div>
                </div>
            </div>

            <div ng-show="edrType === BMS_JOB_TYPES.BULK_SMS && bulkSMSActivityHistory.showTable">
                <div class="portlet-body buttons-portlet-body">
                    <div class="row">
                        <div class="col-md-6 col-sm-6 col-xs-5">
                            <div class="pull-left">
                                <div class="btn-group">
                                    <button type="button" ng-class="{'active': bulkSMSActivityHistory.tableParams.count() == 10}"
                                            ng-click="bulkSMSActivityHistory.tableParams.count(10)" class="btn btn-sm btn-default">10
                                    </button>
                                    <button type="button" ng-class="{'active': bulkSMSActivityHistory.tableParams.count() == 25}"
                                            ng-click="bulkSMSActivityHistory.tableParams.count(25)" class="btn btn-sm btn-default">25
                                    </button>
                                    <button type="button" ng-class="{'active': bulkSMSActivityHistory.tableParams.count() == 50}"
                                            ng-click="bulkSMSActivityHistory.tableParams.count(50)" class="btn btn-sm btn-default">50
                                    </button>
                                    <button type="button" ng-class="{'active': bulkSMSActivityHistory.tableParams.count() == 100}"
                                            ng-click="bulkSMSActivityHistory.tableParams.count(100)" class="btn btn-sm btn-default">100
                                    </button>
                                    <button type="button" ng-class="{'active': bulkSMSActivityHistory.tableParams.count() == 250}"
                                            ng-click="bulkSMSActivityHistory.tableParams.count(250)" class="btn btn-sm btn-default">250
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-sm-3 col-xs-3">
                        </div>

                        <div class="col-md-3 col-sm-3 col-xs-4">
                            <div class="pull-right">
                                <div class="btn-group" ng-show="bulkSMSActivityHistory.tableParams.total() > 0">
                                    <button type="button" ng-click="csv.download(exportFileName, bulkSMSActivityHistory.list)" class="btn btn-sm btn-default">{{ 'Export.CSV' | translate }}</button>
                                    <button type="button" ng-click="xls.download(exportFileName, bulkSMSActivityHistory.list)" class="btn btn-sm btn-default">{{ 'Export.Excel' | translate }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="portlet-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="table-responsive">
                                <table ng-table="bulkSMSActivityHistory.tableParams" class="table table-striped table-bordered"
                                       template-pagination="ngTableCustomPager.html"
                                       export-csv="csv" export-xls="xls"
                                       export-options="exportOptions">
                                    <thead>
                                    <tr>
                                        <th class="sortable"
                                            uib-popover="{{ 'Products.BulkMessaging.Troubleshooting.TableColumnsTooltips.Date' | translate }}" popover-placement="top" popover-animation="false" popover-trigger="'mouseenter'" popover-append-to-body="true"
                                            ng-class="{'sort-asc': bulkSMSActivityHistory.tableParams.isSortBy('transactionTimestamp', 'asc'), 'sort-desc': bulkSMSActivityHistory.tableParams.isSortBy('transactionTimestamp', 'desc') }"
                                            ng-click="bulkSMSActivityHistory.tableParams.sorting({'transactionTimestamp': bulkSMSActivityHistory.tableParams.isSortBy('transactionTimestamp', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Date' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkSMSActivityHistory.tableParams.isSortBy('organizationName', 'asc'), 'sort-desc': bulkSMSActivityHistory.tableParams.isSortBy('organizationName', 'desc') }"
                                            ng-click="bulkSMSActivityHistory.tableParams.sorting({'organizationName': bulkSMSActivityHistory.tableParams.isSortBy('organizationName', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Organization' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkSMSActivityHistory.tableParams.isSortBy('userName', 'asc'), 'sort-desc': bulkSMSActivityHistory.tableParams.isSortBy('userName', 'desc') }"
                                            ng-click="bulkSMSActivityHistory.tableParams.sorting({'userName': bulkSMSActivityHistory.tableParams.isSortBy('userName', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.User' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkSMSActivityHistory.tableParams.isSortBy('jobDescription', 'asc'), 'sort-desc': bulkSMSActivityHistory.tableParams.isSortBy('jobDescription', 'desc') }"
                                            ng-click="bulkSMSActivityHistory.tableParams.sorting({'jobDescription': bulkSMSActivityHistory.tableParams.isSortBy('jobDescription', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Campaign' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkSMSActivityHistory.tableParams.isSortBy('jobFrom', 'asc'), 'sort-desc': bulkSMSActivityHistory.tableParams.isSortBy('jobFrom', 'desc') }"
                                            ng-click="bulkSMSActivityHistory.tableParams.sorting({'jobFrom': bulkSMSActivityHistory.tableParams.isSortBy('jobFrom', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.From' | translate }}</div>
                                        </th>
                                        <th>
                                            <div>{{ 'CommonLabels.Actions' | translate }}</div>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="item in $data" class="hidden-link-cell-row">
                                        <td align="center">{{item._source.transactionTimestamp | date:'yyyy-MM-dd HH:mm:ss':DateTimeConstants.OFFSET}}</td>
                                        <td align="center">{{item._source.organizationName}}</td>
                                        <td align="center">{{item._source.userName}}</td>
                                        <td align="center">{{item._source.jobDescription}} [{{item._source.jobId}}]</td>
                                        <td align="center">{{item._source.jobFrom}}</td>
                                        <td align="center">
                                            <div class="btn-group dropdown" uib-dropdown dropdown-append-to-body="true" is-open="status.isopen">
                                                <button id="single-button" type="button" class="btn btn-default btn-xs dropdown-toggle" uib-dropdown-toggle ng-disabled="disabled">
                                                    <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                                                </button>
                                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="showBulkSMSDetails(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-bars"></i>&nbsp;&nbsp;{{ 'CommonLabels.Details' | translate }}
                                                        </a>
                                                    </li>
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="showBMSHistory(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-history"></i>&nbsp;&nbsp;{{ 'CommonLabels.History' | translate }}
                                                        </a>
                                                    </li>
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="viewBulkSMSContent(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-file-text-o"></i>&nbsp;&nbsp;{{ 'CommonLabels.ShowMessageContent' | translate }}
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr ng-if="$data.length === 0">
                                        <td colspan="6" class="text-center">{{ 'CommonMessages.EmptyTable' | translate }}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-show="edrType === BMS_JOB_TYPES.BULK_MMS && bulkMMSActivityHistory.showTable">
                <div class="portlet-body buttons-portlet-body">
                    <div class="row">
                        <div class="col-md-6 col-sm-6 col-xs-5">
                            <div class="pull-left">
                                <div class="btn-group">
                                    <button type="button" ng-class="{'active': bulkMMSActivityHistory.tableParams.count() == 10}"
                                            ng-click="bulkMMSActivityHistory.tableParams.count(10)" class="btn btn-sm btn-default">10
                                    </button>
                                    <button type="button" ng-class="{'active': bulkMMSActivityHistory.tableParams.count() == 25}"
                                            ng-click="bulkMMSActivityHistory.tableParams.count(25)" class="btn btn-sm btn-default">25
                                    </button>
                                    <button type="button" ng-class="{'active': bulkMMSActivityHistory.tableParams.count() == 50}"
                                            ng-click="bulkMMSActivityHistory.tableParams.count(50)" class="btn btn-sm btn-default">50
                                    </button>
                                    <button type="button" ng-class="{'active': bulkMMSActivityHistory.tableParams.count() == 100}"
                                            ng-click="bulkMMSActivityHistory.tableParams.count(100)" class="btn btn-sm btn-default">100
                                    </button>
                                    <button type="button" ng-class="{'active': bulkMMSActivityHistory.tableParams.count() == 250}"
                                            ng-click="bulkMMSActivityHistory.tableParams.count(250)" class="btn btn-sm btn-default">250
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-sm-3 col-xs-3">
                        </div>

                        <div class="col-md-3 col-sm-3 col-xs-4">
                            <div class="pull-right">
                                <div class="btn-group" ng-show="bulkMMSActivityHistory.tableParams.total() > 0">
                                    <button type="button" ng-click="csv.download(exportFileName, bulkMMSActivityHistory.list)" class="btn btn-sm btn-default">{{ 'Export.CSV' | translate }}</button>
                                    <button type="button" ng-click="xls.download(exportFileName, bulkMMSActivityHistory.list)" class="btn btn-sm btn-default">{{ 'Export.Excel' | translate }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="portlet-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="table-responsive">
                                <table ng-table="bulkMMSActivityHistory.tableParams" class="table table-striped table-bordered"
                                       template-pagination="ngTableCustomPager.html"
                                       export-csv="csv" export-xls="xls"
                                       export-options="exportOptions">
                                    <thead>
                                    <tr>
                                        <th class="sortable"
                                            uib-popover="{{ 'Products.BulkMessaging.Troubleshooting.TableColumnsTooltips.Date' | translate }}" popover-placement="top" popover-animation="false" popover-trigger="'mouseenter'" popover-append-to-body="true"
                                            ng-class="{'sort-asc': bulkMMSActivityHistory.tableParams.isSortBy('transactionTimestamp', 'asc'), 'sort-desc': bulkMMSActivityHistory.tableParams.isSortBy('transactionTimestamp', 'desc') }"
                                            ng-click="bulkMMSActivityHistory.tableParams.sorting({'transactionTimestamp': bulkMMSActivityHistory.tableParams.isSortBy('transactionTimestamp', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Date' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkMMSActivityHistory.tableParams.isSortBy('organizationName', 'asc'), 'sort-desc': bulkMMSActivityHistory.tableParams.isSortBy('organizationName', 'desc') }"
                                            ng-click="bulkMMSActivityHistory.tableParams.sorting({'organizationName': bulkMMSActivityHistory.tableParams.isSortBy('organizationName', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Organization' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkMMSActivityHistory.tableParams.isSortBy('userName', 'asc'), 'sort-desc': bulkMMSActivityHistory.tableParams.isSortBy('userName', 'desc') }"
                                            ng-click="bulkMMSActivityHistory.tableParams.sorting({'userName': bulkMMSActivityHistory.tableParams.isSortBy('userName', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.User' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkMMSActivityHistory.tableParams.isSortBy('jobDescription', 'asc'), 'sort-desc': bulkMMSActivityHistory.tableParams.isSortBy('jobDescription', 'desc') }"
                                            ng-click="bulkMMSActivityHistory.tableParams.sorting({'jobDescription': bulkMMSActivityHistory.tableParams.isSortBy('jobDescription', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Campaign' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkMMSActivityHistory.tableParams.isSortBy('jobFrom', 'asc'), 'sort-desc': bulkMMSActivityHistory.tableParams.isSortBy('jobFrom', 'desc') }"
                                            ng-click="bulkMMSActivityHistory.tableParams.sorting({'jobFrom': bulkMMSActivityHistory.tableParams.isSortBy('jobFrom', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.From' | translate }}</div>
                                        </th>
                                        <th>
                                            <div>{{ 'CommonLabels.Actions' | translate }}</div>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="item in $data" class="hidden-link-cell-row">
                                        <td align="center">{{item._source.transactionTimestamp | date:'yyyy-MM-dd HH:mm:ss':DateTimeConstants.OFFSET}}</td>
                                        <td align="center">{{item._source.organizationName}}</td>
                                        <td align="center">{{item._source.userName}}</td>
                                        <td align="center">{{item._source.jobDescription}} [{{item._source.jobId}}]</td>
                                        <td align="center">{{item._source.jobFrom}}</td>
                                        <td align="center">
                                            <div class="btn-group dropdown" uib-dropdown dropdown-append-to-body="true" is-open="status.isopen">
                                                <button id="single-button" type="button" class="btn btn-default btn-xs dropdown-toggle" uib-dropdown-toggle ng-disabled="disabled">
                                                    <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                                                </button>
                                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="showBulkMMSDetails(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-bars"></i>&nbsp;&nbsp;{{ 'CommonLabels.Details' | translate }}
                                                        </a>
                                                    </li>
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="showBMSHistory(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-history"></i>&nbsp;&nbsp;{{ 'CommonLabels.History' | translate }}
                                                        </a>
                                                    </li>
                                                    <li role="menuitem" ng-if="false">
                                                        <a href="javascript:;" ng-click="viewBulkMMSContent(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-file-text-o"></i>&nbsp;&nbsp;{{ 'CommonLabels.ShowMessageContent' | translate }}
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr ng-if="$data.length === 0">
                                        <td colspan="6" class="text-center">{{ 'CommonMessages.EmptyTable' | translate }}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-show="edrType === BMS_JOB_TYPES.BULK_IVR && bulkIVRActivityHistory.showTable">
                <div class="portlet-body buttons-portlet-body">
                    <div class="row">
                        <div class="col-md-6 col-sm-6 col-xs-5">
                            <div class="pull-left">
                                <div class="btn-group">
                                    <button type="button" ng-class="{'active': bulkIVRActivityHistory.tableParams.count() == 10}"
                                            ng-click="bulkIVRActivityHistory.tableParams.count(10)" class="btn btn-sm btn-default">10
                                    </button>
                                    <button type="button" ng-class="{'active': bulkIVRActivityHistory.tableParams.count() == 25}"
                                            ng-click="bulkIVRActivityHistory.tableParams.count(25)" class="btn btn-sm btn-default">25
                                    </button>
                                    <button type="button" ng-class="{'active': bulkIVRActivityHistory.tableParams.count() == 50}"
                                            ng-click="bulkIVRActivityHistory.tableParams.count(50)" class="btn btn-sm btn-default">50
                                    </button>
                                    <button type="button" ng-class="{'active': bulkIVRActivityHistory.tableParams.count() == 100}"
                                            ng-click="bulkIVRActivityHistory.tableParams.count(100)" class="btn btn-sm btn-default">100
                                    </button>
                                    <button type="button" ng-class="{'active': bulkIVRActivityHistory.tableParams.count() == 250}"
                                            ng-click="bulkIVRActivityHistory.tableParams.count(250)" class="btn btn-sm btn-default">250
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-sm-3 col-xs-3">
                        </div>

                        <div class="col-md-3 col-sm-3 col-xs-4">
                            <div class="pull-right">
                                <div class="btn-group" ng-show="bulkIVRActivityHistory.tableParams.total() > 0">
                                    <button type="button" ng-click="csv.download(exportFileName, bulkIVRActivityHistory.list)" class="btn btn-sm btn-default">{{ 'Export.CSV' | translate }}</button>
                                    <button type="button" ng-click="xls.download(exportFileName, bulkIVRActivityHistory.list)" class="btn btn-sm btn-default">{{ 'Export.Excel' | translate }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="portlet-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="table-responsive">
                                <table ng-table="bulkIVRActivityHistory.tableParams" class="table table-striped table-bordered"
                                       template-pagination="ngTableCustomPager.html"
                                       export-csv="csv" export-xls="xls"
                                       export-options="exportOptions">
                                    <thead>
                                    <tr>
                                        <th class="sortable"
                                            uib-popover="{{ 'Products.BulkMessaging.Troubleshooting.TableColumnsTooltips.Date' | translate }}" popover-placement="top" popover-animation="false" popover-trigger="'mouseenter'" popover-append-to-body="true"
                                            ng-class="{'sort-asc': bulkIVRActivityHistory.tableParams.isSortBy('transactionTimestamp', 'asc'), 'sort-desc': bulkIVRActivityHistory.tableParams.isSortBy('transactionTimestamp', 'desc') }"
                                            ng-click="bulkIVRActivityHistory.tableParams.sorting({'transactionTimestamp': bulkIVRActivityHistory.tableParams.isSortBy('transactionTimestamp', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Date' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkIVRActivityHistory.tableParams.isSortBy('organizationName', 'asc'), 'sort-desc': bulkIVRActivityHistory.tableParams.isSortBy('organizationName', 'desc') }"
                                            ng-click="bulkIVRActivityHistory.tableParams.sorting({'organizationName': bulkIVRActivityHistory.tableParams.isSortBy('organizationName', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Organization' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkIVRActivityHistory.tableParams.isSortBy('userName', 'asc'), 'sort-desc': bulkIVRActivityHistory.tableParams.isSortBy('userName', 'desc') }"
                                            ng-click="bulkIVRActivityHistory.tableParams.sorting({'userName': bulkIVRActivityHistory.tableParams.isSortBy('userName', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.User' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkIVRActivityHistory.tableParams.isSortBy('jobDescription', 'asc'), 'sort-desc': bulkIVRActivityHistory.tableParams.isSortBy('jobDescription', 'desc') }"
                                            ng-click="bulkIVRActivityHistory.tableParams.sorting({'jobDescription': bulkIVRActivityHistory.tableParams.isSortBy('jobDescription', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.Campaign' | translate }}</div>
                                        </th>
                                        <th class="sortable"
                                            ng-class="{'sort-asc': bulkIVRActivityHistory.tableParams.isSortBy('jobFrom', 'asc'), 'sort-desc': bulkIVRActivityHistory.tableParams.isSortBy('jobFrom', 'desc') }"
                                            ng-click="bulkIVRActivityHistory.tableParams.sorting({'jobFrom': bulkIVRActivityHistory.tableParams.isSortBy('jobFrom', 'asc') ? 'desc' : 'asc'})">
                                            <div>{{ 'Products.BulkMessaging.Troubleshooting.TableColumns.From' | translate }}</div>
                                        </th>
                                        <th>
                                            <div>{{ 'CommonLabels.Actions' | translate }}</div>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="item in $data" class="hidden-link-cell-row">
                                        <td align="center">{{item._source.transactionTimestamp | date:'yyyy-MM-dd HH:mm:ss':DateTimeConstants.OFFSET}}</td>
                                        <td align="center">{{item._source.organizationName}}</td>
                                        <td align="center">{{item._source.userName}}</td>
                                        <td align="center">{{item._source.jobDescription}} [{{item._source.jobId}}]</td>
                                        <td align="center">{{item._source.jobFrom}}</td>
                                        <td align="center">
                                            <div class="btn-group dropdown" uib-dropdown dropdown-append-to-body="true" is-open="status.isopen">
                                                <button id="single-button" type="button" class="btn btn-default btn-xs dropdown-toggle" uib-dropdown-toggle ng-disabled="disabled">
                                                    <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                                                </button>
                                                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="showBulkIVRDetails(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-bars"></i>&nbsp;&nbsp;{{ 'CommonLabels.Details' | translate }}
                                                        </a>
                                                    </li>
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="showBMSHistory(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-history"></i>&nbsp;&nbsp;{{ 'CommonLabels.History' | translate }}
                                                        </a>
                                                    </li>
                                                    <li role="menuitem">
                                                        <a href="javascript:;" ng-click="viewBulkIVRContent(item._source)"
                                                           ng-if="AuthorizationService.canAllTroubleshootingRead()">
                                                            <i class="fa fa-file-text-o"></i>&nbsp;&nbsp;{{ 'CommonLabels.ShowMessageContent' | translate }}
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr ng-if="$data.length === 0">
                                        <td colspan="6" class="text-center">{{ 'CommonMessages.EmptyTable' | translate }}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

</div>
