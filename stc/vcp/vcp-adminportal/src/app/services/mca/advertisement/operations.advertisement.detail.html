<div class="portlet-header">
    <h4 class="portlet-title">
        {{ 'Services.MCA.Operations.Advertisement.Title' | translate }}
    </h4>
</div>

<div class="portlet-body">

    <form class="form-horizontal parsley-form" novalidate id="form" name="form" method="post" enctype="multipart/form-data">

        <div class="form-group">
            <label for="name" class="col-md-3">{{ 'Services.MCA.Operations.Advertisement.TableColumns.AdName' | translate }}</label>
            <div class="col-md-7">
                <input id="name" name="name" type="text" class="form-control" dir="auto"
                       ng-model="entry.name"
                       ng-required="true" ng-maxlength="100" maxlength="100"
                       ng-disabled="entry.id || !AuthorizationService.canUpdateAdvertisements()"/>
                <ul ng-class="{ 'parsley-error-list': form.name.$dirty && form.name.$invalid }" ng-show="form.name.$dirty && form.name.$invalid">
                    <li class="required" ng-show="form.name.$error.maxlength">{{ 'CommonMessages.MaxLengthError' | translate:{max_length: 100} }}</li>
                    <li class="required" ng-show="form.name.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                </ul>
            </div>
        </div>

        <div class="form-group">
            <label for="state" class="col-md-3">{{ 'CommonLabels.State' | translate }}</label>
            <div class="col-md-7">
                <select id="state" name="state" class="form-control parsley-validated"
                        ng-model="entry.state" ng-options="opt for opt in STATES"
                        ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())">
                </select>
            </div>
        </div>

        <div class="form-group time-picker-form-group">
            <label for="validFrom" class="col-md-3">{{ 'Services.MCA.Operations.Advertisement.TableColumns.ValidFrom' | translate }}</label>
            <div class="col-md-7">
                <div class="row col-md-8">
                    <div id="startDate" class="input-group date datepicker-field">
                        <input type="text" class="form-control input-sm" id="validFrom" name="validFrom"
                               uib-datepicker-popup="{{dateFormat}}" ng-model="entry.validFromDate"
                               is-open="validFromDatePicker.opened" max-date="entry.validToDate" datepicker-options="dateOptions"
                               ng-required="true" ng-change="updateValidFromDate(entry.validFromDate)"
                               ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"/>
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default input-sm" ng-click="openValidFromDatePicker($event)" ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"><i class="fa fa-calendar"></i></button>
                        </span>
                    </div>
                    <ul ng-class="{ 'parsley-error-list': form.validFrom.$dirty && form.validFrom.$invalid }" ng-show="form.validFrom.$dirty && form.validFrom.$invalid">
                        <li class="required" ng-show="form.validFrom.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                        <li class="required" ng-show="form.validFrom.$error.date">{{ 'GenericFormFields.StartDateAndTime.Messages.Invalid' | translate }}</li>
                        <li class="required" ng-show="form.validFrom.$error.maxDateExceeded">{{ 'Services.MCA.Operations.Advertisement.Messages.MaxDateExceeded' | translate }}</li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <span class="time-picker with-date-picker">
                        <div uib-timepicker ng-model="entry.validFromTime" hour-step="hstep" minute-step="mstep"
                             show-meridian="false" readonly-input="true" mousewheel="false"
                             ng-change="updateValidFromTime(entry.validFromTime)"
                             ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"></div>
                    </span>
                </div>
            </div>
        </div>

        <div class="form-group time-picker-form-group">
            <label for="validTo" class="col-md-3">{{ 'Services.MCA.Operations.Advertisement.TableColumns.ValidTo' | translate }}</label>
            <div class="col-md-7">
                <div class="row col-md-8">
                    <div id="endDate" class="input-group date datepicker-field">
                        <input id="validTo" name="validTo" type="text" class="form-control input-sm"
                               uib-datepicker-popup="{{dateFormat}}" ng-model="entry.validToDate"
                               is-open="validToDatePicker.opened" min-date="entry.validFromDate" datepicker-options="dateOptions"
                               ng-required="true"
                               ng-change="updateValidToDate(entry.validToDate)"
                               ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"/>
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default input-sm" ng-click="openValidToDatePicker($event)" ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"><i class="fa fa-calendar"></i></button>
                        </span>
                    </div>
                    <ul ng-class="{ 'parsley-error-list': form.validTo.$dirty && form.validTo.$invalid }" ng-show="form.validTo.$dirty && form.validTo.$invalid">
                        <li class="required" ng-show="form.validTo.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                        <li class="required" ng-show="form.validTo.$error.date">{{ 'GenericFormFields.EndDateAndTime.Messages.Invalid' | translate }}</li>
                        <li class="required" ng-show="form.validTo.$error.minDateExceeded">{{ 'Services.MCA.Operations.Advertisement.Messages.MinDateExceeded' | translate }}</li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <span class="time-picker with-date-picker">
                        <div uib-timepicker ng-model="entry.validToTime" hour-step="hstep" minute-step="mstep"
                             show-meridian="false" readonly-input="true" mousewheel="false"
                             ng-change="updateValidToTime(entry.validToTime)"
                             ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"></div>
                    </span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3">{{ 'Services.MCA.Operations.Advertisement.TableColumns.Mask' | translate }}</label>
            <div class="col-md-7">
                <div class="btn-group">
                    <button type="button" class="btn {{maskDaysOfWeek ?'btn-primary active':'btn-default'}} btn-sm"
                            ng-model="maskDaysOfWeek" uib-btn-checkbox ng-change="changeMaskType()"
                            ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())">{{ 'Services.MCA.Operations.Advertisement.TableColumns.DaysOfWeek' | translate }}
                    </button>
                    <button type="button" class="btn {{maskHoursOfDay ?'btn-primary active':'btn-default'}} btn-sm"
                            ng-model="maskHoursOfDay" uib-btn-checkbox ng-change="changeMaskType()"
                            ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())">{{ 'Services.MCA.Operations.Advertisement.TableColumns.HoursOfDay' | translate }}
                    </button>
                </div>
            </div>
        </div>

        <div class="form-group" ng-if="entry.mask === 'DAYS_OF_WEEK' || entry.mask === 'BOTH'">
            <label class="col-md-3">{{ 'Services.MCA.Operations.Advertisement.TableColumns.DaysOfWeek' | translate }}</label>
            <div class="col-md-9">
                <div class="btn-group">
                    <button id="daysOfWeek_{{$index}}" name="daysOfWeek_{{$index}}" type="button" class="btn {{isDaySelected(day.id) ? 'btn-primary active' : 'btn-default'}} btn-sm"
                            ng-model="tempDaysOfWeek" uib-btn-checkbox
                            ng-repeat="day in DAYS_OF_WEEK"
                            ng-change="toggleDay(day.id)"
                            ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())">
                        {{ day.text | translate }}
                    </button>
                </div>
            </div>
        </div>

        <div class="form-group time-picker-form-group" ng-if="entry.mask === 'HOUR_OF_DAY' || entry.mask === 'BOTH'">
            <label class="col-md-3">{{ 'Services.MCA.Operations.Advertisement.TableColumns.StartEndTime' | translate }}</label>
            <div class="col-md-2">
                <span class="time-picker with-date-picker">
                    <div uib-timepicker ng-model="entry.startTime" hour-step="hstep" minute-step="mstep"
                         show-meridian="false" readonly-input="true" mousewheel="false"
                         ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"
                         ng-change="updateStartTime()"></div>
                </span>
            </div>
            <div class="col-md-2">
                <span class="time-picker with-date-picker">
                    <div uib-timepicker ng-model="entry.endTime" hour-step="hstep" minute-step="mstep"
                         show-meridian="false" readonly-input="true" mousewheel="false"
                         ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())"
                         ng-change="updateEndTime()"></div>
                </span>
            </div>
        </div>

        <div class="form-group" ng-if="entry.mask === 'HOUR_OF_DAY' || entry.mask === 'BOTH'">
            <label class="col-md-3">{{ 'Services.MCA.Operations.Advertisement.TableColumns.ExcludeTheTimeRange' | translate }}</label>
            <div class="col-md-7">
                <div class="btn-group">
                    <span class="btn {{entry.timeExcluded?'btn-primary active':'btn-default'}} btn-sm" ng-model="entry.timeExcluded" uib-btn-radio="true" ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())">{{ 'CommonLabels.Yes' | translate }}</span>
                    <span class="btn {{!entry.timeExcluded?'btn-primary active':'btn-default'}} btn-sm" ng-model="entry.timeExcluded" uib-btn-radio="false" ng-disabled="(entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements())">{{ 'CommonLabels.No' | translate }}</span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-7 col-md-push-3">
                <button type="submit" class="btn btn-danger"
                        ng-disabled="form.$invalid || (entry.id ? !AuthorizationService.canUpdateAdvertisements() : !AuthorizationService.canCreateAdvertisements()) || isNotChanged()"
                        ng-click="save(entry);">
                    {{ 'CommonLabels.Save' | translate }}
                </button>
                <button type="reset" class="btn btn-default" ng-click="cancel();">
                    {{ 'CommonLabels.Cancel' | translate }}
                </button>
            </div>
        </div>

    </form>

</div>
