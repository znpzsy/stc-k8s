<form class="form-horizontal parsley-form" novalidate id="form" name="form" method="post" enctype="multipart/form-data">

    <span ng-include="'subsystems/reporting/reports/reporting.formfields.common.html'"></span>

    <div class="form-group" ng-show="reportCategory.intervals.length > 1">
        <label class="col-md-3">{{ 'Subsystems.Reporting.Type' | translate }}</label>
        <div class="col-md-3">
            <select class="form-control parsley-validated" ng-model="interval" ng-options="opt as opt.name for opt in reportCategory.intervals">
            </select>
        </div>
    </div>

    <div class="form-group" ng-if="interval.name !== 'DAILY_SPECIAL'">
        <label for="startDate" class="col-md-3 text-left">{{ ((interval.name === 'MINUTELY' || interval.name === 'HOURLY' || interval.name === 'ALL') ? 'Subsystems.Reporting.StartDateTime' : 'Subsystems.Reporting.StartDate') | translate }}</label>
        <div class="col-md-3">
            <p class="input-group datepicker-field">
                <input type="text" class="form-control input-sm" id="startDate" name="startDate"
                       uib-datepicker-popup="{{dateFormat}}" ng-model="dateHolder.startDate"
                       is-open="startDatePicker.opened"
                       datepicker-options="dateOptions" ng-required="true"
                       ng-change="updateStartDate(dateHolder.startDate)"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default input-sm"
                            ng-click="openStartDatePicker($event)"><i
                            class="fa fa-calendar"></i></button>
                </span>
                <ul ng-class="{ 'parsley-error-list': form.startDate.$dirty && form.startDate.$invalid }" ng-show="form.startDate.$dirty && form.startDate.$invalid">
                    <li class="required" ng-show="form.startDate.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                    <li class="required" ng-show="form.startDate.$error.parse">{{ 'GenericFormFields.StartDate.Messages.Invalid' | translate }}</li>
<!--                    <li class="required" ng-show="form.startDate.$error.hourlyReport1DailyIntervalError">{{ 'CommonMessages.HourlyReportDailyIntervalError' | translate:{ days: 1 } }}</li>-->
<!--                    <li class="required" ng-show="form.startDate.$error.hourlyReport2DailyIntervalError">{{ 'CommonMessages.HourlyReportDailyIntervalError' | translate:{ days: 2 } }}</li>-->
<!--                    <li class="required" ng-show="form.startDate.$error.hourlyReport5DailyIntervalError">{{ 'CommonMessages.HourlyReportDailyIntervalError' | translate:{ days: 5 } }}</li>-->
<!--                    <li class="required" ng-show="form.startDate.$error.dailyReportMonthlyIntervalError">{{ 'CommonMessages.DailyReportMonthlyIntervalError' | translate:{ months: 2 } }}</li>-->

                    <li class="required" ng-show="form.startDate.$error.hourlyReportIntervalError">{{ 'CommonMessages.HourlyReportIntervalError' | translate:{ hours: hourCount } }}</li>
                    <li class="required" ng-show="form.startDate.$error.dailyReportIntervalError">{{ 'CommonMessages.DailyReportIntervalError' | translate:{ days: dayCount } }}</li>
                    <li class="required" ng-show="form.startDate.$error.monthlyReport6MonthlyIntervalError">{{ 'CommonMessages.DailyReportMonthlyIntervalError' | translate:{ months: 6 } }}</li>
                </ul>
            </p>
        </div>
        <div class="col-md-4">
            <span class="time-picker with-date-picker" ng-if="(interval.name === 'MINUTELY' || interval.name === 'HOURLY' || interval.name === 'ALL')">
                <div uib-timepicker ng-model="dateHolder.startTime" hour-step="hstep" minute-step="mstep"
                            show-meridian="false" readonly-input="false" mousewheel="false"
                            ng-change="updateStartDateTime(dateHolder.startTime)"></div>
            </span>
        </div>
    </div>

    <div class="form-group" ng-if="interval.name !== 'DAILY_SPECIAL'">
        <label for="endDate" class="col-md-3 text-left">{{ ((interval.name === 'MINUTELY' || interval.name === 'HOURLY' || interval.name === 'ALL') ? 'Subsystems.Reporting.EndDateTime' : 'Subsystems.Reporting.EndDate') | translate }}</label>
        <div class="col-md-3">
            <p class="input-group datepicker-field">
                <input type="text" class="form-control input-sm" id="endDate" name="endDate"
                       uib-datepicker-popup="{{dateFormat}}" ng-model="dateHolder.endDate"
                       is-open="endDatePicker.opened"
                       datepicker-options="dateOptions" ng-required="true"
                       ng-change="updateEndDate(dateHolder.endDate)"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default input-sm" ng-click="openEndDatePicker($event)">
                        <i class="fa fa-calendar"></i>
                    </button>
                </span>
                <ul ng-class="{ 'parsley-error-list': form.endDate.$dirty && form.endDate.$invalid }" ng-show="form.endDate.$dirty && form.endDate.$invalid">
                    <li class="required" ng-show="form.endDate.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                    <li class="required" ng-show="form.endDate.$error.parse">{{'GenericFormFields.EndDate.Messages.Invalid' | translate }}</li>

<!--                    <li class="required" ng-show="form.endDate.$error.hourlyReport1DailyIntervalError">{{ 'CommonMessages.HourlyReportDailyIntervalError' | translate:{ days: 1 } }}</li>-->
<!--                    <li class="required" ng-show="form.endDate.$error.hourlyReport2DailyIntervalError">{{ 'CommonMessages.HourlyReportDailyIntervalError' | translate:{ days: 2 } }}</li>-->
<!--                    <li class="required" ng-show="form.endDate.$error.hourlyReport5DailyIntervalError">{{ 'CommonMessages.HourlyReportDailyIntervalError' | translate:{ days: 5 } }}</li>-->
<!--                    <li class="required" ng-show="form.endDate.$error.dailyReportMonthlyIntervalError">{{ 'CommonMessages.DailyReportMonthlyIntervalError' | translate:{ months: 2 } }}</li>-->

            <li class="required" ng-show="form.endDate.$error.hourlyReportIntervalError">{{ 'CommonMessages.HourlyReportIntervalError' | translate:{ hours: hourCount } }}</li>
            <li class="required" ng-show="form.endDate.$error.dailyReportIntervalError">{{ 'CommonMessages.DailyReportIntervalError' | translate:{ days: dayCount } }}</li>
            <li class="required" ng-show="form.endDate.$error.monthlyReport6MonthlyIntervalError">{{ 'CommonMessages.DailyReportMonthlyIntervalError' | translate:{ months: 6 } }}</li>
                </ul>
            </p>
        </div>
        <div class="col-md-4">
            <span class="time-picker with-date-picker" ng-if="(interval.name === 'MINUTELY' || interval.name === 'HOURLY' || interval.name === 'ALL')">
                <div uib-timepicker ng-model="dateHolder.endTime" hour-step="hstep" minute-step="mstep"
                            show-meridian="false" readonly-input="false" mousewheel="false"
                            ng-change="updateEndDateTime(dateHolder.endTime)"></div>
            </span>
        </div>
    </div>

    <!-- Daily Special Date Selection -->
    <div class="form-group" ng-if="interval.name === 'DAILY_SPECIAL'">
        <label for="startDate" class="col-md-3 text-left">{{ 'Subsystems.Reporting.Date' | translate }}</label>
        <div class="col-md-3">
            <p class="input-group datepicker-field">
                <input type="text" class="form-control input-sm" id="startDate" name="startDate"
                       uib-datepicker-popup="{{dateFormat}}" ng-model="dateHolder.startDate"
                       is-open="startDatePicker.opened"
                       datepicker-options="dateOptions" ng-required="true"
                       ng-change="updateStartDate(dateHolder.startDate)"/>
                <span class="input-group-btn">
                    <button type="button" class="btn btn-default input-sm"
                            ng-click="openStartDatePicker($event)"><i
                            class="fa fa-calendar"></i></button>
                </span>
                <ul ng-class="{ 'parsley-error-list': form.startDate.$dirty && form.startDate.$invalid }" ng-show="form.startDate.$dirty && form.startDate.$invalid">
                    <li class="required" ng-show="form.startDate.$error.required">{{ 'CommonMessages.RequiredFieldError' | translate }}</li>
                    <li class="required" ng-show="form.startDate.$error.parse">{{ 'GenericFormFields.StartDate.Messages.Invalid' | translate }}</li>
                </ul>
            </p>
        </div>
    </div>

    <div class="form-group">
        <label class="col-md-3">{{ 'Subsystems.Reporting.Format' | translate }}</label>
        <div class="col-md-3">
            <select id="formatPentaho" name="formatPentaho" class="form-control parsley-validated"
                    ng-model="formatPentaho"
                    ng-options="opt as opt.name for opt in (reportCategory.formats || FORMATS_PENTAHO)">
            </select>
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-7 col-md-push-3">
            <button type="submit" class="btn btn-danger" ng-disabled="form.$invalid"
                    ng-click="export(reportCategory, interval, formatPentaho, dateHolder, permanentParams, additionalParams);"
                    ng-disabled="!AuthorizationService.canReportOnDemand()">
                {{ (formatPentaho.inline ? 'CommonLabels.View' : 'CommonLabels.Download') | translate }}
            </button>
        </div>
    </div>

</form>
